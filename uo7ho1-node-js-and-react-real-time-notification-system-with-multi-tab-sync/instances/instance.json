{
  "instance_id": "UO7HO1",
  "problem_statement": "The product team needs a real-time notification system for the project management application. When tasks are assigned or updated, all relevant users should receive instant notifications in their browser. Users often have multiple browser tabs open and expect the notification state (read/unread) to stay synchronized across all tabs without requiring a page refresh. The system needs to deliver notifications within 1 second of task events, display an unread count badge on a bell icon, show toast popups for new notifications, and persist notification history with pagination. Users should not see duplicate toasts when they have multiple tabs open, and notifications received while temporarily offline should appear when they reconnect",
  "base_commit": "repository_before/",
  "test_patch": "tests/",
  "github_url": "https://github.com/ep-eaglepoint-ai/bd_datasets_003/tree/main/uo7ho1-node-js-and-react-real-time-notification-system-with-multi-tab-sync",
  "environment_setup": "Dockerfile",
  "FAIL_TO_PASS": [],
  "PASS_TO_PASS": [
    "tests/notification.test.ts::Requirement 1: Socket.io Session Cookie Authentication should authenticate connections via session cookies from handshake headers",
    "tests/notification.test.ts::Requirement 1: Socket.io Session Cookie Authentication should reject connections with tokens in WebSocket URL",
    "tests/notification.test.ts::Requirement 1: Socket.io Session Cookie Authentication should reject connections with missing session cookies",
    "tests/notification.test.ts::Requirement 1: Socket.io Session Cookie Authentication should reject connections with invalid or expired sessions",
    "tests/notification.test.ts::Requirement 2: Exponential Backoff Reconnection should start reconnection delay at 1 second",
    "tests/notification.test.ts::Requirement 2: Exponential Backoff Reconnection should double delay on each attempt up to 30 seconds",
    "tests/notification.test.ts::Requirement 2: Exponential Backoff Reconnection should add random jitter to prevent thundering herd",
    "tests/notification.test.ts::Requirement 3: Single Tab Toast Display should use BroadcastChannel API to coordinate between tabs",
    "tests/notification.test.ts::Requirement 3: Single Tab Toast Display should broadcast toast-shown message when showing toast",
    "tests/notification.test.ts::Requirement 3: Single Tab Toast Display should suppress toast in other tabs when toast-shown is received",
    "tests/notification.test.ts::Requirement 4: Multi-tab Read State Sync should update UI optimistically before server confirmation",
    "tests/notification.test.ts::Requirement 4: Multi-tab Read State Sync should broadcast read state via BroadcastChannel",
    "tests/notification.test.ts::Requirement 4: Multi-tab Read State Sync should sync read state from socket events",
    "tests/notification.test.ts::Requirement 4: Multi-tab Read State Sync should sync read state across tabs via BroadcastChannel messages",
    "tests/notification.test.ts::Requirement 5: Offline Notification Recovery should persist last notification ID in localStorage",
    "tests/notification.test.ts::Requirement 5: Offline Notification Recovery should emit get-missed event on reconnect with last notification ID",
    "tests/notification.test.ts::Requirement 5: Offline Notification Recovery should fetch notifications created after the last known ID",
    "tests/notification.test.ts::Requirement 6: Concurrent Mark-as-Read Accuracy should use server as authoritative source for unread count",
    "tests/notification.test.ts::Requirement 6: Concurrent Mark-as-Read Accuracy should never allow unread count to go negative",
    "tests/notification.test.ts::Requirement 6: Concurrent Mark-as-Read Accuracy should broadcast actual count after any mark-as-read operation",
    "tests/notification.test.ts::Requirement 6: Concurrent Mark-as-Read Accuracy should handle concurrent mark-as-read from different tabs correctly",
    "tests/notification.test.ts::Requirement 7: Connection Status Indicator should display green dot for connected state",
    "tests/notification.test.ts::Requirement 7: Connection Status Indicator should display yellow pulsing dot for reconnecting state",
    "tests/notification.test.ts::Requirement 7: Connection Status Indicator should display red dot for disconnected state",
    "tests/notification.test.ts::Requirement 7: Connection Status Indicator should include ARIA live region for screen reader announcements",
    "tests/notification.test.ts::Requirement 8: Cursor-based Pagination should accept cursor and limit query parameters",
    "tests/notification.test.ts::Requirement 8: Cursor-based Pagination should return data array, nextCursor, and hasMore",
    "tests/notification.test.ts::Requirement 8: Cursor-based Pagination should use last notification ID (createdAt) as cursor",
    "tests/notification.test.ts::Requirement 8: Cursor-based Pagination should return hasMore=false and nextCursor=null when no more data",
    "tests/notification.test.ts::Requirement 9: Prefers-reduced-motion Support should check preference using window.matchMedia",
    "tests/notification.test.ts::Requirement 9: Prefers-reduced-motion Support should apply CSS class that sets animation-duration to 0ms when reduced motion preferred",
    "tests/notification.test.ts::Requirement 9: Prefers-reduced-motion Support should make toasts appear/disappear instantly without animations when reduced motion enabled",
    "tests/notification.test.ts::Requirement 10: Event Listener Cleanup should remove socket event listeners when component unmounts",
    "tests/notification.test.ts::Requirement 10: Event Listener Cleanup should close BroadcastChannel and remove listeners on unmount",
    "tests/notification.test.ts::Requirement 10: Event Listener Cleanup should not have growing listener count after repeated mount/unmount",
    "tests/notification.test.ts::Requirement 11: Notification Bell Badge should show actual number for counts 1-99",
    "tests/notification.test.ts::Requirement 11: Notification Bell Badge should show 99+ for counts 100 or higher",
    "tests/notification.test.ts::Requirement 11: Notification Bell Badge should hide badge completely when count is zero",
    "tests/notification.test.ts::Requirement 11: Notification Bell Badge should have sufficient color contrast ratio of at least 4.5:1",
    "tests/notification.test.ts::Requirement 12: Infinite Scroll with Intersection Observer should use Intersection Observer to watch sentinel element",
    "tests/notification.test.ts::Requirement 12: Infinite Scroll with Intersection Observer should load more when sentinel becomes visible",
    "tests/notification.test.ts::Requirement 12: Infinite Scroll with Intersection Observer should show loading state while fetching next page",
    "tests/notification.test.ts::Requirement 12: Infinite Scroll with Intersection Observer should not fetch if hasMore is false",
    "tests/notification.test.ts::Requirement 12: Infinite Scroll with Intersection Observer should not fetch if a fetch is already in progress",
    "tests/notification.test.ts::Requirement 13: Prisma Schema Indexes should have composite index on userId and createdAt for pagination queries",
    "tests/notification.test.ts::Requirement 13: Prisma Schema Indexes should have composite index on userId and isRead for unread count queries",
    "tests/notification.test.ts::Requirement 13: Prisma Schema Indexes should sort createdAt index in descending order for efficient pagination",
    "tests/notification.test.ts::Requirement 14: N+1 Query Prevention should batch fetch related resources by resource type",
    "tests/notification.test.ts::Requirement 14: N+1 Query Prevention should not fetch one at a time for each notification",
    "tests/notification.test.ts::Requirement 15: Toast Auto-dismiss and Interaction should auto-dismiss after 5 seconds",
    "tests/notification.test.ts::Requirement 15: Toast Auto-dismiss and Interaction should pause dismiss timer while user hovers",
    "tests/notification.test.ts::Requirement 15: Toast Auto-dismiss and Interaction should allow manual dismiss by clicking close button",
    "tests/notification.test.ts::Requirement 15: Toast Auto-dismiss and Interaction should navigate to resource and mark as read when clicking toast body",
    "tests/notification.test.ts::Requirement 15: Toast Auto-dismiss and Interaction should have keyboard accessible close button with visible focus indicator",
    "tests/notification.test.ts::Requirement 15: Toast Auto-dismiss and Interaction should handle keyboard events (Enter/Space) on close button"
  ]
}
