{
  "instance_id": "LMXG02",
  "problem_statement": "Build a TypeScript module that enforces a strict workflow for support or operations cases. Each case can be in only one state at a time, and only specific actions are allowed from each state. The module must validate requested actions, apply valid state transitions, and clearly explain why invalid actions are rejected. It must behave predictably, never mutate existing data, and safely handle malformed input without crashing. The output must be reliable for UI behavior, backend enforcement, and audit use.",
  "base_commit": "repository_before/",
  "test_patch": "tests/",
  "github_url": "https://github.com/ep-eaglepoint-ai/bd_datasets_003/tree/main/lmxg02-strict-case-state-transition-validator",
  "environment_setup": "Dockerfile",
  "FAIL_TO_PASS": [
    "Valid Transitions > NEW -> ASSIGNED via ASSIGN",
    "Valid Transitions > ASSIGNED -> IN_PROGRESS via START_WORK",
    "Valid Transitions > ASSIGNED -> WAITING_CUSTOMER via REQUEST_CUSTOMER",
    "Valid Transitions > IN_PROGRESS -> WAITING_CUSTOMER via REQUEST_CUSTOMER",
    "Valid Transitions > IN_PROGRESS -> RESOLVED via RESOLVE",
    "Valid Transitions > WAITING_CUSTOMER -> IN_PROGRESS via START_WORK",
    "Valid Transitions > WAITING_CUSTOMER -> RESOLVED via RESOLVE",
    "Valid Transitions > RESOLVED -> CLOSED via CLOSE",
    "Valid Transitions > RESOLVED -> IN_PROGRESS via REOPEN",
    "Valid Transitions > CLOSED -> IN_PROGRESS via REOPEN",
    "Illegal Transitions > NEW cannot START_WORK directly",
    "Illegal Transitions > NEW cannot RESOLVE directly",
    "Illegal Transitions > NEW cannot CLOSE directly",
    "Illegal Transitions > ASSIGNED cannot RESOLVE directly",
    "Illegal Transitions > IN_PROGRESS cannot CLOSE directly",
    "Illegal Transitions > CLOSED cannot CLOSE again",
    "Illegal Transitions > CLOSED cannot ASSIGN",
    "Unknown Action Types > rejects unknown action type with UNKNOWN_ACTION code",
    "Unknown Action Types > rejects action with no type",
    "Unknown Action Types > rejects null action",
    "Unknown Action Types > rejects undefined action",
    "Unknown Action Types > rejects string as action",
    "Missing Required Fields > ASSIGN without assigneeId returns MISSING_REQUIRED_FIELD",
    "Missing Required Fields > ASSIGN with empty assigneeId returns MISSING_REQUIRED_FIELD",
    "Missing Required Fields > ASSIGN with whitespace-only assigneeId returns MISSING_REQUIRED_FIELD",
    "Missing Required Fields > RESOLVE without resolutionNote returns MISSING_REQUIRED_FIELD",
    "Missing Required Fields > RESOLVE with empty resolutionNote returns MISSING_REQUIRED_FIELD",
    "Missing Required Fields > REOPEN without reason returns MISSING_REQUIRED_FIELD",
    "Missing Required Fields > REOPEN with empty reason returns MISSING_REQUIRED_FIELD",
    "Multiple Validation Issues > returns both MISSING_REQUIRED_FIELD and ILLEGAL_TRANSITION when applicable",
    "Immutability > does not mutate the input case object",
    "Immutability > returns a new case object on success",
    "Immutability > preserves existing case properties in updated object",
    "Determinism > same input produces same output",
    "Determinism > same invalid input produces same error",
    "Complete Workflow > full case lifecycle: NEW -> ASSIGNED -> IN_PROGRESS -> RESOLVED -> CLOSED",
    "Complete Workflow > workflow with customer waiting: ASSIGNED -> WAITING -> IN_PROGRESS -> RESOLVED",
    "Complete Workflow > reopen workflow: CLOSED -> IN_PROGRESS via REOPEN",
    "Applied Changes > ASSIGN action records STATE_CHANGED and ASSIGNEE_CHANGED",
    "Applied Changes > RESOLVE action records STATE_CHANGED and NOTE_ADDED",
    "Applied Changes > REOPEN action records STATE_CHANGED and NOTE_ADDED",
    "Applied Changes > START_WORK action records only STATE_CHANGED",
    "Result Structure > success result has ok:true, updated Case, and applied array",
    "Result Structure > failure result has ok:false and reasons array"
  ],
  "PASS_TO_PASS": []
}
